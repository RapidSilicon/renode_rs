:name: RapidSilicon Gemini test script
:description: This script will run a simple hello world program implementing basic features of Gemini

EnsureTypeIsLoaded "Antmicro.Renode.Peripherals.CPU.RiscV32"

i @/home/rshah/work/git/renode_rs/src/Infrastructure/src/Emulator/Cores/RiscV/Andes_A45.cs

using sysbus
$name?="Gemini"
mach create $name

machine LoadPlatformDescription @platforms/cpus/gemini.repl

$bin_a45renode_app ?= @/home/rshah/work/git/EmbeddedCommon-dev/apps/a45_renode/build/bootrom.elf

showAnalyzer sysbus.uart1

macro reset
"""
    sysbus LoadELF $bin_a45renode_app
"""

runMacro $reset

machine StartGdbServer 3333

