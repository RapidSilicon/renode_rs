:name: RapidSilicon Gemini test script
:description: This script will run a simple hello world program implementing basic features of Gemini

using sysbus
$name?="Gemini"
mach create $name

machine LoadPlatformDescription @platforms/cpus/gemini.repl

axiram SimulationFilePathLinux @/home/jorge-rs/repos/axiram/renode-verilator-integration_rs/samples/ram/build/libVtop.so
ahbadd SimulationFilePathLinux @/home/jorge-rs/repos/axiram/renode-verilator-integration_rs/samples/ahbadd/build/libVtop.so

:$bin ?= @/home/jorge-rs/repos/renode/test/EmbeddedCommon-dev/apps/a45_renode/build/bootrom.elf
$bin ?= @/home/jorge-rs/repos/axiram/EmbeddedCommon-dev/apps/a45_application/build/a45_application.elf

showAnalyzer sysbus.uart1

macro reset
"""
    sysbus LoadELF $bin
"""

runMacro $reset

machine StartGdbServer 3333
